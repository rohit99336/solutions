
---

# ЁЯСе User & Group Management (Team & Security)

рд╕рд┐рд░реНрдл рдПрдХ рдпреВрдЬрд░ рд╕реЗ рдХрд╛рдо рдЪрд▓рд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рд╣рдо "Groups" рдмрдирд╛рддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ `developers`, `managers`, `support`)ред

## 1. рдЧреНрд░реБрдкреНрд╕ рдмрдирд╛рдирд╛ рдФрд░ рдореИрдиреЗрдЬ рдХрд░рдирд╛

| рдХрдорд╛рдВрдб | рд╡рд┐рд╡рд░рдг | DevOps рдЙрдкрдпреЛрдЧ (Real World) |
| --- | --- | --- |
| `sudo groupadd <name>` | рдирдпрд╛ рдЧреНрд░реБрдк рдмрдирд╛рдирд╛ред | `sudo groupadd developers` (рдПрдХ рдбреЗрд╡реЗрд▓рдкрд░ рдЯреАрдо рдХрд╛ рдЧреНрд░реБрдк рдмрдирд╛рдирд╛)ред |
| `groups <user>` | рдЪреЗрдХ рдХрд░рдирд╛ рдХрд┐ рдпреВрдЬрд░ рдХрд┐рди-рдХрд┐рди рдЧреНрд░реБрдкреНрд╕ рдореЗрдВ рд╣реИред | рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреНрдпрд╛ 'rohit' рдХреЛ 'docker' рдЧреНрд░реБрдк рдХрд╛ рдПрдХреНрд╕реЗрд╕ рдорд┐рд▓рд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред |
| `sudo usermod -aG <group> <user>` | **рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг:** рдпреВрдЬрд░ рдХреЛ рдЧреНрд░реБрдк рдореЗрдВ рдЬреЛреЬрдирд╛ред | `sudo usermod -aG www-data rohit`<br>

<br>рдЗрд╕рд╕реЗ рдЖрдк Laravel рдХреА рдлрд╛рдЗрд▓реНрд╕ рдХреЛ рдмрд┐рдирд╛ `sudo` рдХреЗ рдПрдбрд┐рдЯ рдХрд░ рдкрд╛рдПрдВрдЧреЗред |
| `sudo gpasswd -d <user> <group>` | рдпреВрдЬрд░ рдХреЛ рдЧреНрд░реБрдк рд╕реЗ рдирд┐рдХрд╛рд▓рдирд╛ред | рдЕрдЧрд░ рдХреЛрдИ рдЯреАрдо рдЫреЛреЬрдХрд░ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рдЧреНрд░реБрдк рд╕реЗ рд╣рдЯрд╛рдирд╛ред |

> **тЪая╕П рдЪреЗрддрд╛рд╡рдиреА:** `usermod` рдХреЗ рд╕рд╛рде рд╣рдореЗрд╢рд╛ `-aG` (append) рдлреНрд▓реИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред рдЕрдЧрд░ рдЖрдк рд╕рд┐рд░реНрдл `-G` рд▓рдЧрд╛рдПрдВрдЧреЗ, рддреЛ рд╡рд╣ рдпреВрдЬрд░ рдкреБрд░рд╛рдиреЗ рд╕рднреА рдЧреНрд░реБрдкреНрд╕ рд╕реЗ рд╣рдЯ рдЬрд╛рдПрдЧрд╛ рдФрд░ рд╕рд┐рд░реНрдл рдирдП рд╡рд╛рд▓реЗ рдореЗрдВ рд░рд╣реЗрдЧрд╛ред

---

# ЁЯФС The Sudoers File (`/etc/sudoers`)

рдпрд╣ Linux рдХреА рд╕рдмрд╕реЗ **рдкрд╛рд╡рд░рдлреБрд▓ рдФрд░ рдЦрддрд░рдирд╛рдХ** рдлрд╛рдЗрд▓ рд╣реИред рдпрд╣ рддрдп рдХрд░рддреА рд╣реИ рдХрд┐ рдХреМрди `sudo` рдХрдорд╛рдВрдб рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХреМрди рдирд╣реАрдВред

## 1. Sudoers рдлрд╛рдЗрд▓ рдХреЛ рдПрдбрд┐рдЯ рдХрд░рдирд╛ (Golden Rule)

рдХрднреА рднреА рдЯреЗрдХреНрд╕реНрдЯ рдПрдбрд┐рдЯрд░ (nano/vim) рд╕реЗ `/etc/sudoers` рдХреЛ рдбрд╛рдпрд░реЗрдХреНрдЯ рди рдЦреЛрд▓реЗрдВред рдЕрдЧрд░ рдЗрд╕рдореЗрдВ рдПрдХ рдХреЙрдорд╛ (`,`) рдХреА рднреА рдЧрд▓рддреА рд╣реБрдИ, рддреЛ рдЖрдк **рд╣рдореЗрд╢рд╛ рдХреЗ рд▓рд┐рдП** рд╕рд░реНрд╡рд░ рд╕реЗ рд▓реЙрдХ рдЖрдЙрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

рд╣рдореЗрд╢рд╛ рдЗрд╕ рдХрдорд╛рдВрдб рдХрд╛ рдпреВреЫ рдХрд░реЗрдВ:
`sudo visudo`

**рдХреНрдпреЛрдВ?**
`visudo` рдлрд╛рдЗрд▓ рд╕реЗрд╡ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ **Syntax Check** рдХрд░рддрд╛ рд╣реИред рдЕрдЧрд░ рдЧрд▓рддреА рд╣реЛрдЧреА, рддреЛ рд╡рд╣ рдлрд╛рдЗрд▓ рд╕реЗрд╡ рдирд╣реАрдВ рд╣реЛрдиреЗ рджреЗрдЧрд╛ рдФрд░ рдЖрдкрдХрд╛ рд╕рд░реНрд╡рд░ рдЯреВрдЯрдиреЗ рд╕реЗ рдмрдЪ рдЬрд╛рдПрдЧрд╛ред

## 2. рдХрд┐рд╕реА рдпреВрдЬрд░ рдХреЛ Sudo рдкрд╛рд╡рд░ рджреЗрдирд╛

рдЬрдм рдЖрдк `visudo` рдУрдкрди рдХрд░реЗрдВрдЧреЗ, рддреЛ рдЖрдкрдХреЛ рдРрд╕реА рд▓рд╛рдЗрдиреЗрдВ рджрд┐рдЦреЗрдВрдЧреАред рдирдИ рд▓рд╛рдЗрди рдЬреЛреЬрдХрд░ рдЖрдк рдкрд░рдорд┐рд╢рди рджреЗ рд╕рдХрддреЗ рд╣реИрдВ:

#### A. рдпреВрдЬрд░ рдХреЛ рдлреБрд▓ рдПрдбрдорд┐рди (Root) рдмрдирд╛рдирд╛:

```bash
rohit  ALL=(ALL:ALL) ALL

```

*(рдЗрд╕рдХрд╛ рдорддрд▓рдм: рдпреВрдЬрд░ 'rohit' рдХрд┐рд╕реА рднреА рдорд╢реАрди рдкрд░, рдХрд┐рд╕реА рднреА рдпреВрдЬрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдХреЛрдИ рднреА рдХрдорд╛рдВрдб рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИред)*

#### B. рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рдмрд┐рдирд╛ Sudo рдЪрд▓рд╛рдирд╛ (Passwordless Sudo):

DevOps рдореЗрдВ рдСрдЯреЛрдореЗрд╢рди (Scripts) рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреА рдЬрд░реБрд░рдд рдкреЬрддреА рд╣реИ, рддрд╛рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмреАрдЪ рдореЗрдВ рдкрд╛рд╕рд╡рд░реНрдб рди рдорд╛рдВрдЧреЗред

```bash
rohit  ALL=(ALL) NOPASSWD: ALL

```

---

# ЁЯЫбя╕П DevOps Scenario: рд╕реАрдорд┐рдд рдЕрдзрд┐рдХрд╛рд░ рджреЗрдирд╛ (Restricted Access)

*рдорд╛рди рд▓реАрдЬрд┐рдпреЗ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдЬреВрдирд┐рдпрд░ рдбреЗрд╡рд▓рдкрд░ Nginx рд╕рд░реНрд╡рд░ рдХреЛ `restart` рдХрд░ рд╕рдХреЗ, рд▓реЗрдХрд┐рди рд╕рд┐рд╕реНрдЯрдо рдХреА рдмрд╛рдХреА рдлрд╛рдЗрд▓реЗрдВ рдбрд┐рд▓реАрдЯ рди рдХрд░ рд╕рдХреЗред*

рдЖрдк `sudo visudo` рдореЗрдВ рдпрд╣ рд▓рд╛рдЗрди рдЬреЛреЬреЗрдВрдЧреЗ:

```bash
junior_dev  ALL=(root) /bin/systemctl restart nginx

```

**рдЗрд╕рдХрд╛ рдЕрд╕рд░:**

* рдЕрдм рд╡рд╣ рдЬреВрдирд┐рдпрд░ рдбреЗрд╡рд▓рдкрд░ `sudo systemctl restart nginx` рдЪрд▓рд╛ рдкрд╛рдПрдЧрд╛ред
* рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╡рд╣ `sudo rm -rf /` рдЪрд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдЧрд╛, рддреЛ рд▓рд┐рдирдХреНрд╕ рдХрд╣реЗрдЧрд╛: **"Sorry, user is not allowed to execute this command."**

---

### тЬЕ Summary: рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рд░реНрд╡рд░ рд╕реЗрдЯрдЕрдк (Best Practice)

рдЕрдЧрд░ рдЖрдк рдПрдХ рдирдпрд╛ рд╕рд░реНрд╡рд░ рд╕реЗрдЯрдЕрдк рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕реНрдЯреЗрдкреНрд╕ рдпреЗ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП:

1. рдирдпрд╛ рдпреВрдЬрд░ рдмрдирд╛рдпреЗрдВ: `sudo useradd -m rohit`
2. рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗрдЯ рдХрд░реЗрдВ: `sudo passwd rohit`
3. рдЙрд╕реЗ рд╕реБрдбреЛ рдЧреНрд░реБрдк рдореЗрдВ рдбрд╛рд▓реЗрдВ: `sudo usermod -aG sudo rohit` (Ubuntu рдореЗрдВ) рдпрд╛ `wheel` (CentOS рдореЗрдВ)ред
4. рд╡реЗрдм рдЧреНрд░реБрдк рдореЗрдВ рдбрд╛рд▓реЗрдВ: `sudo usermod -aG www-data rohit`
5. рдЕрдм `root` рд╕реЗ рд▓реЙрдЧ рдЖрдЙрдЯ рдХрд░реЗрдВ рдФрд░ `rohit` рд╕реЗ рд▓реЙрдЧ рдЗрди рдХрд░реЗрдВред рдЕрдм `root` рдХрд╛ рдбрд╛рдпрд░реЗрдХреНрдЯ рдЗрд╕реНрддреЗрдорд╛рд▓ рдмрдВрдж рдХрд░ рджреЗрдВред

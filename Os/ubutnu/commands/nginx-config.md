
---

# ЁЯМР Nginx рд╕рд░реНрд╡рд░ рдмреНрд▓реЙрдХ рд╕реЗрдЯрдЕрдк (Laravel рдХреЗ рд▓рд┐рдП)

### рд╕реНрдЯреЗрдк 1: рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╛рдЗрд▓ рдмрдирд╛рдирд╛

Nginx рдХреА рд╕реЗрдЯрд┐рдВрдЧ `/etc/nginx/sites-available/` рдлреЛрд▓реНрдбрд░ рдореЗрдВ рд░рд╣рддреА рд╣реИред рд╣рдо рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдлрд╛рдЗрд▓ рдХреЛ рдПрдбрд┐рдЯ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдмрд▓реНрдХрд┐ рдЕрдкрдиреА рдЦреБрдж рдХреА рдлрд╛рдЗрд▓ рдмрдирд╛рдПрдВрдЧреЗред

рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдпрд╣ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ (рдорд╛рди рд▓реАрдЬрд┐рдпреЗ рдЖрдкрдХреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдирд╛рдо `myproject` рд╣реИ):

```bash
sudo nano /etc/nginx/sites-available/myproject

```

---

### рд╕реНрдЯреЗрдк 2: рдХреЛрдб рд▓рд┐рдЦрдирд╛ (рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг)

рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХреЛрдб рдХреЛ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рдЦреБрд▓реА рд╣реБрдИ рдлрд╛рдЗрд▓ рдореЗрдВ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред
*(рдзреНрдпрд╛рди рджреЗрдВ: рдЬрд╣рд╛рдБ рдореИрдВрдиреЗ `your_domain.com` рдпрд╛ `php8.x` рд▓рд┐рдЦрд╛ рд╣реИ, рдЙрд╕реЗ рдЖрдкрдХреЛ рдЕрдкрдиреА рд╕реЗрдЯрд┐рдВрдЧ рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛)*

```nginx
server {
    # 1. рдкреЛрд░реНрдЯ рд╕реЗрдЯ рдХрд░рдирд╛ (HTTP рдХреЗ рд▓рд┐рдП 80)
    listen 80;
    listen [::]:80;

    # 2. рдбреЛрдореЗрди рдХрд╛ рдирд╛рдо (рдЗрд╕реЗ рдЕрдкрдиреЗ рдбреЛрдореЗрди рдпрд╛ IP рд╕реЗ рдмрджрд▓реЗрдВ)
    server_name example.com www.example.com;

    # 3. рд░реВрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА (рд╕рдмрд╕реЗ рдЬрд░реБрд░реА!)
    # Laravel рдореЗрдВ рд╣рдореЗрдВ 'public' рдлреЛрд▓реНрдбрд░ рдХреЛ рдкреЙрдЗрдВрдЯ рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИ, рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдирд╣реАрдВред
    root /var/www/html/myproject/public;

    # 4. рдЗрдВрдбреЗрдХреНрд╕ рдлрд╛рдЗрд▓реНрд╕ рдХрд╛ рдХреНрд░рдо
    index index.php index.html index.htm index.nginx-debian.html;

    # 5. Laravel рд░реВрдЯрд┐рдВрдЧ (рдЬрд╛рджреВ рдХреА рд▓рд╛рдЗрди)
    # рдпрд╣ рд▓рд╛рдЗрди рд╕рднреА рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЛ index.php рдкрд░ рднреЗрдЬрддреА рд╣реИ рддрд╛рдХрд┐ Laravel рдХреЗ routes рдХрд╛рдо рдХрд░реЗрдВред
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # 6. PHP-FPM рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (PHP рдлрд╛рдЗрд▓реНрд╕ рдХреЛ рдХреИрд╕реЗ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░реЗрдВ)
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        
        # рдпрд╣рд╛рдБ рдЕрдкрдирд╛ PHP рд╡рд░реНрдЬрди рдЪреЗрдХ рдХрд░рдХреЗ рд╕рд╣реА рд▓рд┐рдЦреЗрдВ (рдЬреИрд╕реЗ php8.1-fpm, php8.2-fpm)
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
    }

    # 7. рдЫрд┐рдкреА рд╣реБрдИ рдлрд╛рдЗрд▓реНрд╕ рдХреЛ рд╕реБрд░рдХреНрд╖рд╛ рджреЗрдирд╛ (.env рдХреЛ рдХреЛрдИ рди рдкреЭ рд╕рдХреЗ)
    location ~ /\.ht {
        deny all;
    }
}

```

**рд╕реЗрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:** `Ctrl + O`, рдлрд┐рд░ `Enter`, рдФрд░ рдмрд╛рд╣рд░ рдЖрдиреЗ рдХреЗ рд▓рд┐рдП `Ctrl + X` рджрдмрд╛рдПрдВред

---

### рд╕реНрдЯреЗрдк 3: рдХреЛрдб рдХреЛ рд╕рдордЭрдирд╛ (DevOps рдирдЬрд░рд┐рдпрд╛)

рдПрдХ рдЗрдВрдЬреАрдирд┐рдпрд░ рдХреЛ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЙрд╕рдиреЗ рдХреНрдпрд╛ рдХреЛрдб рд▓рд┐рдЦрд╛ рд╣реИ:

1. **`root .../public;`**: рдЕрдЧрд░ рдЖрдкрдиреЗ `/public` рдирд╣реАрдВ рд▓рд┐рдЦрд╛, рддреЛ рд▓реЛрдЧ рдЖрдкрдХреА `.env` рдлрд╛рдЗрд▓ рдФрд░ рдХреЛрдб рдЪреБрд░рд╛ рд╕рдХрддреЗ рд╣реИрдВред Laravel рдореЗрдВ рд╣рдореЗрд╢рд╛ `public` рдлреЛрд▓реНрдбрд░ рд╣реА рджреБрдирд┐рдпрд╛ рдХреЛ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред
2. **`try_files ... /index.php...`**: рдЕрдЧрд░ рдпрд╣ рд▓рд╛рдЗрди рдирд╣реАрдВ рд╣реЛрдЧреА, рддреЛ рдЖрдкрдХрд╛ рд╣реЛрдордкреЗрдЬ рдЦреБрд▓реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдЬреИрд╕реЗ рд╣реА рдЖрдк `/about` рдпрд╛ `/login` рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВрдЧреЗ, **404 Not Found** рдПрд░рд░ рдЖрдПрдЧрд╛ред рдпрд╣ рд▓рд╛рдЗрди рдЯреНрд░реИрдлрд┐рдХ рдХреЛ Laravel рдХреЗ рдЕрдВрджрд░ рднреЗрдЬрддреА рд╣реИред
3. **`fastcgi_pass`**: Nginx рдЦреБрдж PHP рдХреЛ рдирд╣реАрдВ рд╕рдордЭрддрд╛ред рдпрд╣ рд▓рд╛рдЗрди рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЛ `PHP-FPM` (PHP FastCGI Process Manager) рдХреЛ рд╕реМрдВрдкрддреА рд╣реИред

---

### рд╕реНрдЯреЗрдк 4: рд╕рд╛рдЗрдЯ рдХреЛ рдЗрдиреЗрдмрд▓ (Enable) рдХрд░рдирд╛

рдЕрднреА рд╣рдордиреЗ рдлрд╛рдЗрд▓ `sites-available` (рдЙрдкрд▓рдмреНрдз) рдореЗрдВ рдмрдирд╛рдИ рд╣реИ, рд▓реЗрдХрд┐рди Nginx рдЙрд╕реЗ рддрдм рддрдХ рдирд╣реАрдВ рдкреЭреЗрдЧрд╛ рдЬрдм рддрдХ рд╣рдо рдЙрд╕реЗ `sites-enabled` (рд╕рдХреНрд░рд┐рдп) рдлреЛрд▓реНрдбрд░ рдореЗрдВ рд▓рд┐рдВрдХ рдирд╣реАрдВ рдХрд░рддреЗред

рдЗрд╕реЗ "Symlink" (рд╢реЙрд░реНрдЯрдХрдЯ) рдмрдирд╛рдирд╛ рдХрд╣рддреЗ рд╣реИрдВ:

```bash
sudo ln -s /etc/nginx/sites-available/myproject /etc/nginx/sites-enabled/

```

---

### рд╕реНрдЯреЗрдк 5: рд╕рд┐рдВрдЯреЗрдХреНрд╕ рдЪреЗрдХ рдХрд░рдирд╛ (DevOps рдХрд╛ рдЧреЛрд▓реНрдбрди рд░реВрд▓) тЪая╕П

Nginx рдХреЛ рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ **рд╣рдореЗрд╢рд╛** рдЪреЗрдХ рдХрд░реЗрдВ рдХрд┐ рдХреЛрдб рдореЗрдВ рдХреЛрдИ рдЧрд▓рддреА (рдХреЙрдорд╛ рдпрд╛ рдмреНрд░реИрдХреЗрдЯ рдХреА рдХрдореА) рддреЛ рдирд╣реАрдВ рд╣реИред рдЕрдЧрд░ рдЧрд▓рддреА рд╣реБрдИ рдФрд░ рдЖрдкрдиреЗ рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд┐рдпрд╛, рддреЛ рдкреВрд░рд╛ рд╕рд░реНрд╡рд░ рдмрдВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

```bash
sudo nginx -t

```

рдЕрдЧрд░ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ **"syntax is ok"** рдФрд░ **"test is successful"** рдЖрдП, рддрднреА рдЖрдЧреЗ рдмреЭреЗрдВред

---

### рд╕реНрдЯреЗрдк 6: Nginx рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд░рдирд╛

рдЕрдм рдирдИ рд╕реЗрдЯрд┐рдВрдЧ рд▓рд╛рдЧреВ рдХрд░реЗрдВ:

```bash
sudo systemctl restart nginx

```

---

### ЁЯЫая╕П рдХреЙрдорди рдПрд░рд░ рдФрд░ рд╕рдорд╛рдзрд╛рди (Troubleshooting)

1. **500 Server Error:**
* рдЬреНрдпрд╛рджрд╛рддрд░ рдпрд╣ **Permissions** рдХреА рд╕рдорд╕реНрдпрд╛ рд╣реЛрддреА рд╣реИред
* рдЪреЗрдХ рдХрд░реЗрдВ: `storage` рдлреЛрд▓реНрдбрд░ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреА рдкрд░рдорд┐рд╢рди рд╣реИ рдпрд╛ рдирд╣реАрдВред
* рдХрдорд╛рдВрдб: `sudo chmod -R 775 storage` рдФрд░ `sudo chown -R www-data:www-data storage`


2. **502 Bad Gateway:**
* рдЗрд╕рдХрд╛ рдорддрд▓рдм Nginx рддреЛ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди PHP-FPM рдмрдВрдж рд╣реИ рдпрд╛ рд╡рд░реНрдЬрди рдЧрд▓рдд рд╣реИред
* рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ `fastcgi_pass` рд╡рд╛рд▓реА рд▓рд╛рдЗрди рдЪреЗрдХ рдХрд░реЗрдВред рдХреНрдпрд╛ рдЖрдкрдиреЗ `php8.1` рд▓рд┐рдЦрд╛ рд╣реИ рдФрд░ рд╕рд░реНрд╡рд░ рдкрд░ `php8.2` рдЗрдирд╕реНрдЯреЙрд▓ рд╣реИ?
* рд╡рд░реНрдЬрди рдЪреЗрдХ рдХрд░реЗрдВ: `php -v`


3. **404 Not Found (Routes рдкрд░):**
* рдЖрдкрдиреЗ рд╕реНрдЯреЗрдк 2 рдореЗрдВ `try_files` рд╡рд╛рд▓реА рд▓рд╛рдЗрди рдЧрд▓рдд рд▓рд┐рдЦреА рд╣реИ рдпрд╛ рдорд┐рд╕ рдХрд░ рджреА рд╣реИред



---
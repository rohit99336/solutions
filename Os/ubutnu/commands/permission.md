
---

# ЁЯФТ Advanced Permissions & Security (DevOps Edition)

DevOps рдореЗрдВ рд╣рдорд╛рд░рд╛ рдирд┐рдпрдо рд╣реЛрддрд╛ рд╣реИ: **"Principle of Least Privilege"** (рд╕рд┐рд░реНрдл рдЙрддрдиреА рд╣реА рдкрд░рдорд┐рд╢рди рджреЛ рдЬрд┐рддрдиреА рдЬрд░реВрд░рдд рд╣реЛ, рдЙрд╕рд╕реЗ рдПрдХ рднреА рдЬреНрдпрд╛рджрд╛ рдирд╣реАрдВ)ред

## 1. рдкрд░рдорд┐рд╢рди рдХреЛ рдЧрд╣рд░рд╛рдИ рд╕реЗ рд╕рдордЭрдирд╛ (Understanding Numeric & Symbolic Modes)

рд╕рд┐рд░реНрдл рдирдВрдмрд░ (777/755) рд╣реА рдирд╣реАрдВ, рдЖрдкрдХреЛ рд╕рд┐рдВрдмрд▓ рднреА рд╕рдордЭрдиреЗ рд╣реЛрдВрдЧреЗред

| рдХрдорд╛рдВрдб | рд╡рд┐рд╡рд░рдг | DevOps рдЙрдкрдпреЛрдЧ (Real World) |
| --- | --- | --- |
| `chmod 600 <file>` | рд╕рд┐рд░реНрдл рдорд╛рд▓рд┐рдХ (Owner) рдкреЭ рдФрд░ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИред рдмрд╛рдХреА рдХреЛрдИ рдирд╣реАрдВред | **SSH Keys (.pem files)** рдХреЗ рд▓рд┐рдП рдЕрдирд┐рд╡рд╛рд░реНрдпред рдЕрдЧрд░ рдпрд╣ рдирд╣реАрдВ рдХрд┐рдпрд╛, рддреЛ AWS/Server рдХреА рд░рд┐рдЬреЗрдХреНрдЯ рдХрд░ рджреЗрдЧрд╛ред |
| `chmod 644 <file>` | рдорд╛рд▓рд┐рдХ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИ, рдмрд╛рдХреА рд╕рдм рд╕рд┐рд░реНрдл рдкреЭ рд╕рдХрддреЗ рд╣реИрдВред | **Web Config Files (`.env` рдпрд╛ `nginx.conf`)** рдХреЗ рд▓рд┐рдП рдмреЗрд╕реНрдЯред рддрд╛рдХрд┐ рд╣реИрдХрд░ рдХреЛрдб рдмрджрд▓ рди рд╕рдХреЗ, рд╕рд┐рд░реНрдл рдкреЭ рд╕рдХреЗред |
| `chmod 755 <folder>` | рдлреЛрд▓реНрдбрд░ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреИрдгреНрдбрд░реНрдб рдкрд░рдорд┐рд╢рдиред | рд╡реЗрдм рдбрд╛рдпрд░реЗрдХреНрдЯрд░реАрдЬ (`public/`, `app/`) рдХреЗ рд▓рд┐рдПред |
| `chmod +x <file>` | рдлрд╛рдЗрд▓ рдХреЛ "Executable" (рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреА рддрд░рд╣ рдЪрд▓рдиреЗ рдпреЛрдЧреНрдп) рдмрдирд╛рдирд╛ред | рдЬрдм рдЖрдк рдХреЛрдИ **Shell Script (`deploy.sh`)** рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЙрд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЬрд░реВрд░реА рд╣реИред |
| `chmod -R <permissions> <folder>` | рд░рд┐рдХрд░реНрд╕рд┐рд╡ (Recursive) - рдлреЛрд▓реНрдбрд░ рдФрд░ рдЙрд╕рдХреЗ рдЕрдВрджрд░ рдХреА рд╣рд░ рдЪреАрдЬ рдкрд░ рд▓рд╛рдЧреВ рдХрд░рдирд╛ред | рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рдкрд░рдорд┐рд╢рди рдПрдХ рд╕рд╛рде рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред |

## 2. рдУрдирд░рд╢рд┐рдк рдФрд░ рдЧреНрд░реБрдкреНрд╕ (Ownership & Groups)

рдлрд╛рдЗрд▓ рдХрд┐рд╕рдХреА рд╣реИ? рдпрд╣ `chmod` рд╕реЗ рдЬреНрдпрд╛рджрд╛ рдЬрд░реБрд░реА рд╣реИред

| рдХрдорд╛рдВрдб | рд╡рд┐рд╡рд░рдг | DevOps рдЙрдкрдпреЛрдЧ (Real World) |
| --- | --- | --- |
| `chown user:group <file>` | рдлрд╛рдЗрд▓ рдХрд╛ рдорд╛рд▓рд┐рдХ (User) рдФрд░ рдЧреНрд░реБрдк рдмрджрд▓рдирд╛ред | Nginx/Apache рдЕрдХреНрд╕рд░ `www-data` рдпреВрдЬрд░ рд╕реЗ рдЪрд▓рддреЗ рд╣реИрдВред рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдлрд╛рдЗрд▓реНрд╕ рдХрд╛ рдорд╛рд▓рд┐рдХ `www-data` рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред |
| `chown -R www-data:www-data /var/www` | рдкреВрд░реЗ рд╡реЗрдм рдлреЛрд▓реНрдбрд░ рдХрд╛ рдорд╛рд▓рд┐рдХ рд╡реЗрдм-рд╕рд░реНрд╡рд░ рдпреВрдЬрд░ рдХреЛ рдмрдирд╛рдирд╛ред | Laravel рдореЗрдВ **Storage/Cache** рдПрд░рд░ рдлрд┐рдХреНрд╕ рдХрд░рдиреЗ рдХрд╛ рд╕рд╣реА рддрд░реАрдХрд╛ (рдмрдЬрд╛рдп `777` рджреЗрдиреЗ рдХреЗ)ред |
| `usermod -aG <group> <user>` | рдЕрдкрдиреЗ рдпреВрдЬрд░ рдХреЛ рдХрд┐рд╕реА рдЧреНрд░реБрдк рдореЗрдВ рдЬреЛреЬрдирд╛ред | **рдмрд╣реБрдд рдЬрд░реБрд░реА:** рдЕрдЧрд░ рдЖрдк рдЕрдкрдиреЗ рдпреВрдЬрд░ (`rohit`) рдХреЛ `www-data` рдЧреНрд░реБрдк рдореЗрдВ рдЬреЛреЬ рджреЗрдВ, рддреЛ рдЖрдк рднреА рдлрд╛рдЗрд▓реНрд╕ рдПрдбрд┐рдЯ рдХрд░ рдкрд╛рдПрдВрдЧреЗ рдФрд░ рд╕рд░реНрд╡рд░ рднреАред |

---

## 3. рдкрд░рдорд┐рд╢рди рдбрд┐рдмрдЧрд┐рдВрдЧ (Permission Debugging)

*рдореБрдЭреЗ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓реЗрдЧрд╛ рдХрд┐ рдкрд░рдорд┐рд╢рди рд╕рд╣реА рд╣реИ рдпрд╛ рдирд╣реАрдВ?*

DevOps рдЗрдВрдЬреАрдирд┐рдпрд░ `ls -l` рд╕реЗ рдЖрдЧреЗ рджреЗрдЦрддрд╛ рд╣реИ:

| рдХрдорд╛рдВрдб | рд╡рд┐рд╡рд░рдг |
| --- | --- |
| `stat <file>` | рдлрд╛рдЗрд▓ рдХреА рдкреВрд░реА рдЬрдиреНрдордХреБрдВрдбрд▓реА (Detailed info)ред рдпрд╣ рдкрд░рдорд┐рд╢рди рдХреЛ "Octal" (рдЬреИрд╕реЗ 0644) рдФрд░ "Text" рджреЛрдиреЛрдВ рдореЗрдВ рджрд┐рдЦрд╛рддрд╛ рд╣реИред |
| `id <user>` | рдпрд╣ рдЪреЗрдХ рдХрд░рдирд╛ рдХрд┐ рдпреВрдЬрд░ рдХрд┐рд╕-рдХрд┐рд╕ рдЧреНрд░реБрдк рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред (рдЬреИрд╕реЗ рдХреНрдпрд╛ `rohit` рдпреВрдЬрд░ `sudo` рдпрд╛ `docker` рдЧреНрд░реБрдк рдореЗрдВ рд╣реИ?) |

---

## 4. Laravel + Linux Permission рдХрд╛ рд╕рд╣реА рд╕реНрдЯреНрд░рдХреНрдЪрд░ (Best Practice)

рдПрдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░ рдХреЗ рддреМрд░ рдкрд░, рдЖрдк рдЕрдкрдиреЗ Laravel рдкреНрд░реЛрдЬреЗрдХреНрдЯ (`/var/www/html/project`) рдкрд░ рдпреЗ рдХрдорд╛рдВрдбреНрд╕ рдЪрд▓рд╛рдПрдВрдЧреЗ:

1. **рдлрд╛рдЗрд▓реНрд╕ рдХрд╛ рдорд╛рд▓рд┐рдХ рд╡реЗрдм рд╕рд░реНрд╡рд░ рдХреЛ рдмрдирд╛рдПрдВ:**
`sudo chown -R www-data:www-data /var/www/html/project`
2. **рдлреЛрд▓реНрдбрд░реНрд╕ рдХреЛ 755 рдкрд░рдорд┐рд╢рди рджреЗрдВ:**
`sudo find /var/www/html/project -type d -exec chmod 755 {} \;`
3. **рдлрд╛рдЗрд▓реНрд╕ рдХреЛ 644 рдкрд░рдорд┐рд╢рди рджреЗрдВ:**
`sudo find /var/www/html/project -type f -exec chmod 644 {} \;`
4. **рд╕рд┐рд░реНрдл Storage рдФрд░ Cache рдХреЛ рд▓рд┐рдЦрдиреЗ (Write) рдХреА рдЫреВрдЯ рджреЗрдВ:**
`sudo chmod -R 775 storage bootstrap/cache`

---

### ЁЯТб DevOps рдЯрд┐рдк: `sudo` рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрдм рди рдХрд░реЗрдВ?

рдЕрдХреНрд╕рд░ рдирдП рд▓реЛрдЧ рд╣рд░ рдХрдорд╛рдВрдб рдХреЗ рдЖрдЧреЗ `sudo` рд▓рдЧрд╛ рджреЗрддреЗ рд╣реИрдВред

* **Composer** рдЪрд▓рд╛рддреЗ рд╕рдордп `sudo` рдХрд╛ рдкреНрд░рдпреЛрдЧ **рди рдХрд░реЗрдВ** (`sudo composer update` тЭМ)ред рдЗрд╕рд╕реЗ рдлрд╛рдЗрд▓реНрд╕ `root` рдпреВрдЬрд░ рдХреА рд╣реЛ рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдмрд╛рдж рдореЗрдВ Laravel рдЙрдиреНрд╣реЗрдВ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рдХрд░ рдкрд╛рддрд╛ред
* Git рдХрдорд╛рдВрдбреНрд╕ рдореЗрдВ рднреА `sudo` рд╕реЗ рдмрдЪреЗрдВред

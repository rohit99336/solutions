---

## тЬЕ Soft Delete рдХреНрдпрд╛ рд╣реИ?

рдЬрдм рдЖрдк рдХрд┐рд╕реА рдбреЗрдЯрд╛ рдХреЛ **рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рд╣рдЯрд╛рдирд╛ (permanent delete)** рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ, рдмрд▓реНрдХрд┐ рдХреЗрд╡рд▓ **рдЫрд┐рдкрд╛рдирд╛** рдпрд╛ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╡рд╛рдкрд╕ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП **рдорд╛рд░реНрдХ рдХрд░рдирд╛** рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ Laravel рдореЗрдВ "Soft Delete" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

---

## ЁЯФз Soft Delete рдХреЛ рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ?

### 1я╕ПтГг **рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдореЗрдВ `deleted_at` рдХреЙрд▓рдо рдЬреЛрдбрд╝реЗрдВ**

```php
$table->softDeletes(); 
```

**рдЙрджрд╛рд╣рд░рдг:**

```php
Schema::table('users', function (Blueprint $table) {
    $table->softDeletes(); // рдпрд╣ 'deleted_at' рдирд╛рдо рдХрд╛ рдХреЙрд▓рдо рдмрдирд╛рдПрдЧрд╛
});
```

---

### 2я╕ПтГг **рдореЙрдбрд▓ рдореЗрдВ SoftDeletes рдЯреНрд░реЗрдЯ рдЬреЛрдбрд╝реЗрдВ**

```php
use Illuminate\Database\Eloquent\SoftDeletes;

class User extends Model
{
    use SoftDeletes;
}
```

---

## ЁЯФН Soft Delete рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ?

рдЬрдм рдЖрдк рдбреЗрдЯрд╛ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╣рдЯрд╛рддреЗ рд╣реИрдВ:

```php
User::find(1)->delete();
```

рддреЛ рд╡рд╣ рд░рд┐рдХреЙрд░реНрдб рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рд╣рдЯрддрд╛ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ `deleted_at` рдХреЙрд▓рдо рдореЗрдВ рддрд╛рд░реАрдЦ рдФрд░ рд╕рдордп рджрд░реНрдЬ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

---

## ЁЯУЛ Soft Delete рдХреЗ рдореБрдЦреНрдп рдореЗрдердбреНрд╕ (рдЙрджрд╛рд╣рд░рдг рд╕рд╣рд┐рдд)

| рдореЗрдердб            | рдХрд╛рд░реНрдп                                     | рдЙрджрд╛рд╣рд░рдг                                     |
| --------------- | ----------------------------------------- | ------------------------------------------ |
| `delete()`      | рд░рд┐рдХреЙрд░реНрдб рдХреЛ soft delete рдХрд░рддрд╛ рд╣реИ            | `User::find(1)->delete();`                 |
| `withTrashed()` | рд╕рднреА (рд╣рдЯрд╛рдП рдЧрдП + рди рд╣рдЯрд╛рдП рдЧрдП) рд░рд┐рдХреЙрд░реНрдб рд▓рд╛рддрд╛ рд╣реИ | `User::withTrashed()->get();`              |
| `onlyTrashed()` | рдХреЗрд╡рд▓ рд╣рдЯрд╛рдП рдЧрдП рд░рд┐рдХреЙрд░реНрдб рд▓рд╛рддрд╛ рд╣реИ              | `User::onlyTrashed()->get();`              |
| `restore()`     | рд╣рдЯрд╛рдП рдЧрдП рд░рд┐рдХреЙрд░реНрдб рдХреЛ рд╡рд╛рдкрд╕ рд▓рд╛рддрд╛ рд╣реИ           | `User::withTrashed()->find(1)->restore();` |
| `forceDelete()` | рд░рд┐рдХреЙрд░реНрдб рдХреЛ рдкреВрд░реА рддрд░рд╣ (рд╕реНрдерд╛рдпреА) рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИ  | `User::find(1)->forceDelete();`            |

---

## ЁЯОп рдкреВрд░рд╛ рдЙрджрд╛рд╣рд░рдг:

```php
// 1. рдХрд┐рд╕реА рдпреВрдЬрд╝рд░ рдХреЛ Soft Delete рдХрд░рдирд╛
$user = User::find(1);
$user->delete();

// 2. Soft Deleted рдпреВрдЬрд╝рд░ рдХреЛ рд╡рд╛рдкрд╕ рд▓рд╛рдирд╛
User::withTrashed()->find(1)->restore();

// 3. рдХреЗрд╡рд▓ Soft Deleted рдпреВрдЬрд╝рд░ рд▓рд╛рдирд╛
$deletedUsers = User::onlyTrashed()->get();

// 4. рдХрд┐рд╕реА рдпреВрдЬрд╝рд░ рдХреЛ рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рд╣рдЯрд╛рдирд╛
User::onlyTrashed()->find(1)->forceDelete();
```

---

## ЁЯУЭ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдмрд╛рддреЗрдВ:

* `deleted_at` рдХреЙрд▓рдо migration рдореЗрдВ рд╣реЛрдирд╛ рдЬрд╝рд░реВрд░реА рд╣реИред
* Laravel рдХреА рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреНрд╡реЗрд░реАрдЬрд╝ Soft Deleted рдбреЗрдЯрд╛ рдХреЛ рдЫрд┐рдкрд╛ рджреЗрддреА рд╣реИрдВред
* `forceDelete()` рд╕реЗ рдбреЗрдЯрд╛ рдкреВрд░реА рддрд░рд╣ рдорд┐рдЯ рдЬрд╛рддрд╛ рд╣реИ, рд╡рд╛рдкрд╕ рдирд╣реАрдВ рд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ред

рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣реЗрдВ рддреЛ рдореИрдВ рдЗрд╕ рдкрд░ рдбреЗрдореЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдпрд╛ рдХреЛрдб рд╕реИрдВрдкрд▓ рднреА рдмрдирд╛ рд╕рдХрддрд╛ рд╣реВрдБред
